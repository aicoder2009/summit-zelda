<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link href='https://fonts.googleapis.com/css?family=Cabin' rel='stylesheet'>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="./logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href='https://fonts.googleapis.com/css?family=Merriweather' rel='stylesheet'>
    <script>
      if (window.location.origin.substring(0,4)==="http"&&window.location.origin.charAt(4)!=="s"){
        //not https!
        window.location="https://"+window.location.href.substring(7);
      }
    </script>
    <script>
      tailwind.config = {
        theme: {
          screens: {
            sm: '0px',
            md: '700px',
            lg: '1200px',
            xl: '1600px'
          }
        }
      }
    </script>
    <script>
      var navMenuShown = false;
      var gebi = function(e){return document.getElementById(e)};
    </script>
    <style>
      html{
        scroll-behavior:smooth;
      }
    </style>
  </head>
  <body onscroll="(function(){if(window.scrollY>10)document.getElementById('navbar').style.backgroundColor='rgba(0,0,0,1)'; else if (window.scrollY<10)document.getElementById('navbar').style.backgroundColor='rgba(0,0,0,0.5)'})()">
    <!--navbar-->
    <nav id="navbar" class="left-0 top-0 z-50 flex items-center justify-between flex-wrap w-screen fixed pr-4 pl-2" style="height:40px; font-family: 'Merriweather';transition: background-color 200ms linear; background-color:rgba(0,0,0,0.5)">
      <div class="flex items-center flex-shrink-0 text-white mr-6 pl-2" onclick="(function(){window.location=window.location.origin+'/summit-zelda'})()">
        <button class="text-xl tracking-tight">Summit Zelda</span>
      </div>
      <div class="block md:hidden">
        <button id="menuToggle" class="flex items-center px-3 py-2 border rounded text-gray-300 border-gray-300 hover:text-white hover:border-white">
          <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Summit Zelda</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg>
        </button>
      </div>
      <div id="navItemContainer" class="w-full block flex-grow md:flex md:items-center md:justify-end md:w-auto text-sm" style="height:100%">
        <div onclick="(function(){window.location=window.location.origin+'/summit-zelda'})()" class="block mt-4 md:flex md:items-center md:pl-2 md:pr-2 md:mt-0 text-gray-200 hover:text-white" style="height:100%;cursor:pointer;">Home</div>
      </div>
    </nav>
    <div class="absolute left-0 top-0 -z-10 bg-cover bg-fixed bg-repeat-y" style="width:100%;height:500vh;background-image:url('./kimi-bg.png')"></div>
    <font style="font-family: 'Cabin';">
    <center>
      <div id="contentBox" class="relative flex flex-col w-9/12 mt-24 rounded-xl justify-center items-center bg-gray-100" style="height:80vh;">
        <div id="menu" class="flex flex-row justify-center items-center">
          <p id="menuTitle" class="text-xl"></p>
          <button id="menuPlay">Play! >></button>
        </div>
        <div id="game" style="display:none">
          <div id="gameLeft">
            <div id="gameGame"></div>
            <div id="gameTools"></div>
          </div>
          <div id="gameRight">
            <button id="save" class="absolute top:0 right:0" disabled>Save</button>
          </div>
        </div>
      </div>
    </center>
    </font>
    <style>
      .main{
        border-radius:8px;
        border:2px solid #000000;
        font-size:20px;
        font-family:'Cabin';
        outline:none;
        margin-bottom:20px; /* NOTE this is gap betw buttons */
      }
      #menuPlay{
        background-color:rgb(54, 219, 54);
      }
      #menuPlay:disabled{
        background-color:rgb(170, 255, 170);
      }
      #menuPlay:hover{
        background-color:rgb(48, 194, 48);
      }
    </style>
    <script src="https://unpkg.com/blockly"></script>
    <script src="scripts/sound_blocks.js"></script>
    <script src="scripts/music_maker.js"></script>
    <script src="scripts/main.js"></script>
    <script>
      (function () {
        let currentButton;
        
        function loadWorkspace(button) {
          const workspace = Blockly.getMainWorkspace();
          if (button.blocklySave) {
          Blockly.serialization.workspaces.load(button.blocklySave, workspace);
          } else {
          workspace.clear();
          }
        }
        
        const toolbox = {
          'kind': 'flyoutToolbox',
          'contents': [
          {
            'kind': 'block',
            'type': 'controls_repeat_ext',
            'inputs': {
            'TIMES': {
              'shadow': {
              'type': 'math_number',
              'fields': {
                'NUM': 5
              }
              }
            }
            }
          }
          ]
        };
      })();
      Blockly.inject('gameGame', {
        toolbox: toolbox,
        scrollbars: false,
        horizontalLayout: true,
        toolboxPosition: "end",
      });
      var resize = function(){
        if (window.innerWidth<700){
          //small
        }else{
          //med + lg++
          var xSplit = 0.75;
          gebi("gameLeft").style.width=(window.innerWidth*xSplit-2)+"px";
          gebi("gameRight").style.width=(window.innerWidth*(1-xSplit)-2)+"px";
          gebi("gameRight").style.left=(window.innerWidth*xSplit-2)+"px";
          var ySplit = 0.8;
          gebi("gameGame").style.height=(window.innerHeight*ySplit-2)+"px";
          gebi("gameTools").style.height=(window.innerHeight*(1-ySplit)-2)+"px";
          gebi("gameTools").style.top=(window.innerHeight*ySplit-2)+"px";
        }
      }
      window.onresize=resize;
      resize();
      gebi("menuPlay").addEventListener("click",function(){
        gebi("navbar").style.display="none";
        gebi("menu").style.display="none";
      })
    </script>
  </body>
</html>